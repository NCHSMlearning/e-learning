<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NCHSM Super Admin Dashboard</title>
<style>
  body { margin:0; font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif; background:#F8FAFC; }
  .container { display:flex; min-height:100vh; }
  .sidebar { width:220px; background:#1E293B; color:#fff; display:flex; flex-direction:column; padding:20px; }
  .sidebar-header { text-align:center; margin-bottom:30px; }
  .sidebar-header img { width:60px; margin-bottom:10px; }
  .nav { list-style:none; padding:0; flex-grow:1; }
  .nav li { margin:10px 0; }
  .nav a { color:#fff; text-decoration:none; padding:10px; border-radius:6px; display:block; transition:0.2s; }
  .nav a:hover, .nav a.active { background:#3B82F6; }
  .logout { margin-top:auto; text-align:center; }
  .logout a { display:inline-block; margin-top:20px; padding:10px 20px; background:#EF4444; color:#fff; text-decoration:none; border-radius:6px; }

  .main { flex:1; padding:20px 30px; overflow-y:auto; }
  header h1 { margin:0; font-size:2rem; }
  .subtitle { color:#475569; margin-bottom:20px; }

  .tab-content { display:none; }
  .tab-content.active { display:block; }

  table { width:100%; border-collapse:collapse; margin-bottom:20px; background:#fff; border-radius:8px; overflow:hidden; }
  th, td { padding:12px; border-bottom:1px solid #E2E8F0; text-align:left; }
  th { background:#E2E8F0; }
  tr:hover { background:#F1F5F9; }

  form input, form select, form button, form textarea { padding:8px 12px; margin:5px 5px 10px 0; border-radius:6px; border:1px solid #CBD5E1; }
  form button { background:#3B82F6; color:#fff; cursor:pointer; }
  form button:hover { background:#2563EB; }
  .flex { display:flex; gap:5px; }
  .btn { padding:4px 8px; border:none; border-radius:4px; cursor:pointer; }
  .btn-approve { background:#10B981; color:#fff; }
  .btn-delete { background:#EF4444; color:#fff; }
  .btn-edit { background:#3B82F6; color:#fff; }
</style>
</head>
<body>
<div class="container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <img src="images/Logo_NCHSM.png" alt="Logo">
      <h2>NCHSM Admin</h2>
    </div>
    <ul class="nav">
      <li><a href="#" data-tab="dashboard" class="active">Dashboard</a></li>
      <li><a href="#" data-tab="users">Users</a></li>
      <li><a href="#" data-tab="students">Students</a></li>
      <li><a href="#" data-tab="courses">Courses</a></li>
      <li><a href="#" data-tab="attendance">Attendance</a></li>
      <li><a href="#" data-tab="exams">Exams</a></li>
      <li><a href="#" data-tab="messages">Messages</a></li>
      <li><a href="#" data-tab="resources">Resources</a></li>
      <li><a href="#" data-tab="pending">Pending</a></li>
    </ul>
    <div class="logout"><a href="#" onclick="logout()">Logout</a></div>
  </aside>

  <!-- Main Content -->
  <main class="main">
    <header>
      <h1>Welcome, Super Admin!</h1>
      <p class="subtitle" id="sessionInfo">Loading...</p>
    </header>

    <!-- Dashboard -->
    <section id="dashboard" class="tab-content active">
      <h2>Dashboard Overview</h2>
      <p>Total Users: <span id="totalUsers">0</span></p>
      <p>Total Admins: <span id="totalAdmins">0</span></p>
      <p>Total Students: <span id="totalStudents">0</span></p>
      <p>Pending Approvals: <span id="totalPending">0</span></p>
    </section>

    <!-- Users -->
    <section id="users" class="tab-content">
      <h2>Manage Users</h2>
      <form id="addUserForm">
        <input type="text" id="new_full_name" placeholder="Full Name" required>
        <input type="email" id="new_email" placeholder="Email" required>
        <input type="text" id="new_phone" placeholder="Phone" required>
        <input type="password" id="new_password" placeholder="Password" required>
        <select id="new_role">
          <option value="admin">Admin</option>
          <option value="superadmin">Super Admin</option>
          <option value="student">Student</option>
        </select>
        <button type="submit">Add User</button>
      </form>
      <table>
        <thead><tr><th>Name</th><th>Email</th><th>Phone</th><th>Role</th><th>Approved</th><th>Actions</th></tr></thead>
        <tbody id="usersTable"></tbody>
      </table>
    </section>

    <!-- Students -->
    <section id="students" class="tab-content">
      <h2>Students</h2>
      <table>
        <thead><tr><th>Name</th><th>Email</th><th>Phone</th><th>Status</th><th>Actions</th></tr></thead>
        <tbody id="studentsTable"></tbody>
      </table>
    </section>

    <!-- Courses -->
    <section id="courses" class="tab-content">
      <h2>Courses</h2>
      <form id="addCourseForm">
        <input type="text" id="course_name" placeholder="Course Name" required>
        <input type="text" id="course_description" placeholder="Description">
        <button type="submit">Add Course</button>
      </form>
      <table>
        <thead><tr><th>Course Name</th><th>Actions</th></tr></thead>
        <tbody id="coursesTable"></tbody>
      </table>
    </section>

    <!-- Attendance -->
    <section id="attendance" class="tab-content">
      <h2>Attendance</h2>
      <form id="addAttendanceForm">
        <select id="att_student_id"></select>
        <select id="att_session_type">
          <option value="classroom">Classroom</option>
          <option value="clinical">Clinical</option>
        </select>
        <select id="att_course_id"></select>
        <input type="text" id="att_location" placeholder="Location">
        <input type="date" id="att_date" required>
        <input type="time" id="att_time">
        <button type="submit">Mark Attendance</button>
      </form>
      <table>
        <thead><tr><th>Student</th><th>Type</th><th>Course/Rotation</th><th>Location/Time</th><th>Date</th><th>Actions</th></tr></thead>
        <tbody id="attendanceTable"></tbody>
      </table>
    </section>

    <!-- Exams -->
    <section id="exams" class="tab-content">
      <h2>Exams</h2>
      <form id="addExamForm">
        <select id="exam_course_id"></select>
        <input type="text" id="exam_title" placeholder="Exam Name" required>
        <input type="date" id="exam_date" required>
        <input type="text" id="exam_status" placeholder="Status">
        <button type="submit">Add Exam</button>
      </form>
      <table>
        <thead><tr><th>Course</th><th>Exam</th><th>Date</th><th>Status</th><th>Actions</th></tr></thead>
        <tbody id="examsTable"></tbody>
      </table>
    </section>

    <!-- Messages -->
    <section id="messages" class="tab-content">
      <h2>Messages</h2>
      <form id="sendMessageForm">
        <input type="text" id="msg_recipient" placeholder="Recipient Email" required>
        <textarea id="msg_body" placeholder="Message" required></textarea>
        <button type="submit">Send Message</button>
      </form>
      <table>
        <thead><tr><th>From</th><th>To</th><th>Message</th><th>Date</th></tr></thead>
        <tbody id="messagesTable"></tbody>
      </table>
    </section>

    <!-- Resources -->
    <section id="resources" class="tab-content">
      <h2>Resources</h2>
      <input type="file" id="resourceFile">
      <input type="text" id="resourceTitle" placeholder="Optional title">
      <button id="uploadResourceBtn">Upload</button>
      <table>
        <thead><tr><th>File</th><th>Size</th><th>Actions</th></tr></thead>
        <tbody id="resourcesTable"></tbody>
      </table>
    </section>

    <!-- Pending Users -->
    <section id="pending" class="tab-content">
      <h2>Pending Users</h2>
      <table>
        <thead><tr><th>Name</th><th>Email</th><th>Actions</th></tr></thead>
        <tbody id="pendingTable"></tbody>
      </table>
    </section>

  </main>
</div>

<!-- Include Supabase JS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
<!-- Include your dashboard script -->
<script src="app.js"></script>
</body>
</html>
