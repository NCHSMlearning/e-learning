<!-- Add retake button in exam details -->
<button onclick="retakeExam(44)" class="retake-btn">Retake Exam</button>

<script>
async function retakeExam(examId) {
    if (confirm('Are you sure you want to retake this exam? Your previous scores will be deleted.')) {
        try {
            // Delete existing exam data
            const { error } = await supabase
                .from('exam_grades')
                .delete()
                .eq('student_id', studentId) // Get from your auth
                .eq('exam_id', examId);
            
            if (error) throw error;
            
            alert('Previous exam data deleted. You can now retake the exam.');
            // Redirect to exam page
            window.location.href = `exam.html?exam_id=${examId}&user_id=${studentId}`;
        } catch (err) {
            console.error('Error retaking exam:', err);
            alert('Error: Could not reset exam. Please contact support.');
        }
    }
}
</script>

<style>
.retake-btn {
    background: #F59E0B;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    margin-top: 10px;
    font-weight: 600;
}

.retake-btn:hover {
    background: #D97706;
}
</style>
